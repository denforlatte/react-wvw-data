(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e){e.exports=[{id:1001,name:"Anvil Rock",population:"Medium"},{id:1002,name:"Borlis Pass",population:"Medium"},{id:1003,name:"Yak's Bend",population:"Full"},{id:1004,name:"Henge of Denravi",population:"High"},{id:1005,name:"Maguuma",population:"VeryHigh"},{id:1006,name:"Sorrow's Furnace",population:"Medium"},{id:1007,name:"Gate of Madness",population:"Medium"},{id:1008,name:"Jade Quarry",population:"Full"},{id:1009,name:"Fort Aspenwood",population:"VeryHigh"},{id:1010,name:"Ehmry Bay",population:"Medium"},{id:1011,name:"Stormbluff Isle",population:"VeryHigh"},{id:1012,name:"Darkhaven",population:"High"},{id:1013,name:"Sanctum of Rall",population:"Medium"},{id:1014,name:"Crystal Desert",population:"VeryHigh"},{id:1015,name:"Isle of Janthir",population:"Medium"},{id:1016,name:"Sea of Sorrows",population:"High"},{id:1017,name:"Tarnished Coast",population:"Full"},{id:1018,name:"Northern Shiverpeaks",population:"High"},{id:1019,name:"Blackgate",population:"Full"},{id:1020,name:"Ferguson's Crossing",population:"Medium"},{id:1021,name:"Dragonbrand",population:"High"},{id:1022,name:"Kaineng",population:"Medium"},{id:1023,name:"Devona's Rest",population:"Medium"},{id:1024,name:"Eredon Terrace",population:"Medium"},{id:2001,name:"Fissure of Woe",population:"Medium"},{id:2002,name:"Desolation",population:"VeryHigh"},{id:2003,name:"Gandara",population:"VeryHigh"},{id:2004,name:"Blacktide",population:"Medium"},{id:2005,name:"Ring of Fire",population:"Medium"},{id:2006,name:"Underworld",population:"Medium"},{id:2007,name:"Far Shiverpeaks",population:"VeryHigh"},{id:2008,name:"Whiteside Ridge",population:"Medium"},{id:2009,name:"Ruins of Surmia",population:"Medium"},{id:2010,name:"Seafarer's Rest",population:"Full"},{id:2011,name:"Vabbi",population:"Medium"},{id:2012,name:"Piken Square",population:"VeryHigh"},{id:2013,name:"Aurora Glade",population:"High"},{id:2014,name:"Gunnar's Hold",population:"High"},{id:2101,name:"Jade Sea [FR]",population:"VeryHigh"},{id:2102,name:"Fort Ranik [FR]",population:"Medium"},{id:2103,name:"Augury Rock [FR]",population:"High"},{id:2104,name:"Vizunah Square [FR]",population:"VeryHigh"},{id:2105,name:"Arborstone [FR]",population:"Medium"},{id:2201,name:"Kodash [DE]",population:"Full"},{id:2202,name:"Riverside [DE]",population:"VeryHigh"},{id:2203,name:"Elona Reach [DE]",population:"VeryHigh"},{id:2204,name:"Abaddon's Mouth [DE]",population:"VeryHigh"},{id:2205,name:"Drakkar Lake [DE]",population:"VeryHigh"},{id:2206,name:"Miller's Sound [DE]",population:"Medium"},{id:2207,name:"Dzagonur [DE]",population:"Medium"},{id:2301,name:"Baruch Bay [SP]",population:"VeryHigh"}]},16:function(e){e.exports={matchupAPIRoot:"https://api.guildwars2.com/v2/wvw/matches?world=",matchupAPIRootReal:"https://api.guildwars2.com/v2/wvw/matches?world=",refreshInterval:3e4,fetchTimeout:480}},31:function(e,t,a){e.exports=a(43)},41:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(25),l=a.n(i),o=a(13),s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var d=a(14),u=a(2),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MATCHUP_DATA_PENDING":return Object(u.a)({},e,{fetching:!0,fetchFailed:!1});case"FETCH_MATCHUP_DATA_FULFILLED":return Object(u.a)({},e,{firstFetchSuccess:!0,fetching:!1});case"FETCH_MATCHUP_DATA_REJECTED":return Object(u.a)({},e,{fetching:!1,fetchFailed:!0});case"SELECT_NEW_SERVER":return Object(u.a)({},e,{firstFetchSuccess:!1,selectedServer:t.payload});case"UPDATE_DISPLAY_MESSAGE":return Object(u.a)({},e,{message:t.payload});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MATCHUP_DATA_FULFILLED":return t.payload;default:return e}},h=a(12);function v(e){return h.find(function(t){return t.id===e}).name}function f(e){var t,a=e.toLowerCase();for(t=0;t<h.length;t++)if(h[t].name.toLowerCase()===a)return h[t].id.toString();return e}function g(e,t){var a,r="";for(a=0;a<t.length;a++)t[a]!==e&&(""!==r&&(r="& "),r+=v(t[a]));return e=v(e),t.length>1&&(r=" (linked with ".concat(r,")")),n.a.createElement("div",{className:"row-fixed"},n.a.createElement("h2",null,e,n.a.createElement("span",null,r)))}function b(e,t){var a,r;if("grey"===e){for(a=0;a<t.length;a++)if("Center"===t[a].type)return a}else for(r=0;r<t.length;r++)if("".concat(e,"home")===t[r].type.toLowerCase())return r;console.warn("Was not able to find map in API.maps: "+e)}function y(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}function E(e){if(e>=1e4){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),t.join(".")}return e}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MATCHUP_DATA_FULFILLED":t.payload.worlds||console.warn("Server code not found.");var a=t.payload.skirmishes[t.payload.skirmishes.length-1].scores;return Object(u.a)({},e,{red:Object(u.a)({},e.red,{name:g(t.payload.worlds.red,t.payload.all_worlds.red),kills:t.payload.kills.red,deaths:t.payload.deaths.red,ratio:y(t.payload.kills.red/t.payload.deaths.red,2),skirmishScore:a.red,victoryPoints:t.payload.victory_points.red}),green:Object(u.a)({},e.green,{name:g(t.payload.worlds.green,t.payload.all_worlds.green),kills:t.payload.kills.green,deaths:t.payload.deaths.green,ratio:y(t.payload.kills.green/t.payload.deaths.green,2),skirmishScore:a.green,victoryPoints:t.payload.victory_points.green}),blue:Object(u.a)({},e.blue,{name:g(t.payload.worlds.blue,t.payload.all_worlds.blue),kills:t.payload.kills.blue,deaths:t.payload.deaths.blue,ratio:y(t.payload.kills.blue/t.payload.deaths.blue,2),skirmishScore:a.blue,victoryPoints:t.payload.victory_points.blue})});case"UPDATE_PPT":return console.log("updating ppt"),Object(u.a)({},e,{red:Object(u.a)({},e,{ppt:t.payload})});default:return e}},w=a(11),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MATCHUP_DATA_FULFILLED":var a=t.payload.maps.find(function(e){return"Center"===e.type}),r=t.payload.maps.find(function(e){return"RedHome"===e.type}),n=t.payload.maps.find(function(e){return"GreenHome"===e.type}),i=t.payload.maps.find(function(e){return"BlueHome"===e.type}),l=function(e){var t,a=["red","green","blue"],r={eternalBattlegrounds:{currentPPT:{}},redBorderland:{currentPPT:{}},greenBorderland:{currentPPT:{}},blueBorderland:{currentPPT:{}}};for(t=0;t<3;t++)r.eternalBattlegrounds.currentPPT[a[t]]=n(b("grey",e),a[t]);for(t=0;t<3;t++)r.redBorderland.currentPPT[a[t]]=n(b("red",e),a[t]);for(t=0;t<3;t++)r.greenBorderland.currentPPT[a[t]]=n(b("green",e),a[t]);for(t=0;t<3;t++)r.blueBorderland.currentPPT[a[t]]=n(b("blue",e),a[t]);function n(t,a){var r,n=e[t].objectives,i=0;for(r=0;r<n.length;r++)n[r].owner.toLowerCase()===a&&(i+=n[r].points_tick);return i}return r}(t.payload.maps);return Object(u.a)({},e,{eternalBattlegrounds:Object(u.a)({},e.eternalBattlegrounds,{currentPPT:l.eternalBattlegrounds.currentPPT,kd:Object(u.a)({},e.eternalBattlegrounds.kd,{red:[].concat(Object(w.a)(e.eternalBattlegrounds.kd.red),[[a.kills.red,a.deaths.red]]),green:[].concat(Object(w.a)(e.eternalBattlegrounds.kd.green),[[a.kills.green,a.deaths.green]]),blue:[].concat(Object(w.a)(e.eternalBattlegrounds.kd.blue),[[a.kills.blue,a.deaths.blue]])})}),redBorderland:Object(u.a)({},e.redBorderland,{currentPPT:l.redBorderland.currentPPT,kd:Object(u.a)({},e.redBorderland.kd,{red:[].concat(Object(w.a)(e.redBorderland.kd.red),[[r.kills.red,r.deaths.red]]),green:[].concat(Object(w.a)(e.redBorderland.kd.green),[[r.kills.green,r.deaths.green]]),blue:[].concat(Object(w.a)(e.redBorderland.kd.blue),[[r.kills.blue,r.deaths.blue]])})}),greenBorderland:Object(u.a)({},e.greenBorderland,{currentPPT:l.greenBorderland.currentPPT,kd:Object(u.a)({},e.greenBorderland.kd,{red:[].concat(Object(w.a)(e.greenBorderland.kd.red),[[n.kills.red,n.deaths.red]]),green:[].concat(Object(w.a)(e.greenBorderland.kd.green),[[n.kills.green,n.deaths.green]]),blue:[].concat(Object(w.a)(e.greenBorderland.kd.blue),[[n.kills.blue,n.deaths.blue]])})}),blueBorderland:Object(u.a)({},e.blueBorderland,{currentPPT:l.blueBorderland.currentPPT,kd:Object(u.a)({},e.blueBorderland.kd,{red:[].concat(Object(w.a)(e.blueBorderland.kd.red),[[i.kills.red,i.deaths.red]]),green:[].concat(Object(w.a)(e.blueBorderland.kd.green),[[i.kills.green,i.deaths.green]]),blue:[].concat(Object(w.a)(e.blueBorderland.kd.blue),[[i.kills.blue,i.deaths.blue]])})})});default:return e}},P=Object(d.c)({displayState:p,fullAPIState:m,serverOverviewState:k,activityAnalyticsState:j}),O=a(27),S=a.n(O),N=a(30),T=Object(d.d)(P,{displayState:{selectedServer:"",firstFetchSuccess:!1,fetching:!1,fetchFailed:!1,message:""},fullAPIState:{},serverOverviewState:{red:{name:"Red Server",ppt:999,kills:0,deaths:0,ratio:0,skirmishScore:0,victoryPoints:0},green:{name:"Green Server",ppt:999,kills:0,deaths:0,ratio:0,skirmishScore:0,victoryPoints:0},blue:{name:"Blue Server",ppt:999,kills:0,deaths:0,ratio:0,skirmishScore:0,victoryPoints:0}},activityAnalyticsState:{eternalBattlegrounds:{currentPPT:{red:0,green:0,blue:0},kd:{red:[],green:[],blue:[]}},redBorderland:{currentPPT:{red:0,green:0,blue:0},kd:{red:[],green:[],blue:[]}},greenBorderland:{currentPPT:{red:0,green:0,blue:0},kd:{red:[],green:[],blue:[]}},blueBorderland:{currentPPT:{red:0,green:0,blue:0},kd:{red:[],green:[],blue:[]}}}},Object(d.a)(S.a,Object(N.a)())),A=a(45),F=a(46),B=a(47),M=a(3),D=a(4),R=a(6),C=a(5),x=a(7),I=a(44),H=function(e){function t(){return Object(M.a)(this,t),Object(R.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.props,t=e.buttonText,a=e.dropdownContent;return n.a.createElement("div",{className:"dropdown-container"},n.a.createElement("button",{className:"btn-dropdown btn-white"},t),n.a.createElement("div",{className:"dropdown-content"},a))}}]),t}(n.a.Component),_=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(R.a)(this,Object(C.a)(t).call(this,e))).state={serverList:[],filteredServers:[]},a.handleClick=a.handleClick.bind(),a}return Object(x.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.continent,a=[];"EU"===t?a=h.filter(function(e){return e.id>=2e3}):"NA"===t?a=h.filter(function(e){return e.id<2e3}):(a=h,console.warn("Continent for ServerSelector not set correctly")),this.setState({filteredServers:a},function(){return e.compileDropdownMenu()})}},{key:"componentDidUpdate",value:function(e,t,a){e.selectedServer!==this.props.selectedServer&&this.compileDropdownMenu()}},{key:"render",value:function(){return n.a.createElement(H,{buttonText:this.props.continent,dropdownContent:this.state.serverList})}},{key:"handleClick",value:function(){this.setState({serverList:[]})}},{key:"compileDropdownMenu",value:function(){var e,t=this,a=[];for(e=0;e<this.state.filteredServers.length;e++){var r=this.state.filteredServers[e];r.id.toString()===this.props.selectedServer?a.push(n.a.createElement(I.a,{to:"#",key:"dropdown "+r.id,className:"dropdown-active"},r.name)):a.push(n.a.createElement(I.a,{to:"/"+r.id,key:"dropdown "+r.id,onClick:function(){return t.handleClick()}},r.name))}this.setState({serverList:a})}}]),t}(n.a.Component),L=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(R.a)(this,Object(C.a)(t).call(this,e))).state={displayMessage:""},a}return Object(x.a)(t,e),Object(D.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){var a=e.displayState,r=a.fetching,n=a.fetchFailed,i=a.message;r?this.setDisplayMessage("updating...",1e3):n?this.setDisplayMessage("failed...",9e3):i&&this.setDisplayMessage(i)}},{key:"render",value:function(){var e=this.props.displayState,t=e.selectedServer,a=e.firstFetchSuccess,r=this.state.displayMessage;return n.a.createElement("header",{className:"header"},n.a.createElement("h1",null,n.a.createElement(I.a,{to:"/",className:"reset-a"},"Guild Wars 2 WvW Overview")),n.a.createElement("div",{className:"display-message"},r),n.a.createElement("nav",null,n.a.createElement("div",{className:"btn-container"},n.a.createElement("br",null),n.a.createElement("h2",null,"Select world:\xa0"),n.a.createElement(_,{continent:"EU",selectedServer:t,firstFetchSuccess:a}),n.a.createElement(_,{continent:"NA",selectedServer:t,firstFetchSuccess:a}))))}},{key:"setDisplayMessage",value:function(e,t){var a=this;clearTimeout(this.displayMessageTimer),this.setState({displayMessage:e}),t&&(this.displayMessageTimer=setTimeout(function(){a.setState({displayMessage:""})},t))}}]),t}(n.a.Component),W=Object(o.b)(function(e){return{displayState:e.displayState}})(L),U=function(e){function t(){return Object(M.a)(this,t),Object(R.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"home"},n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("h1",null,"Introduction"),n.a.createElement("p",null,"Welcome to my Guild Wars 2 world versus world overview web app."),n.a.createElement("p",null,'This app will show you the key details of the week long match up between the selected world (game server) and its two opponents. Low population worlds are often linked with other worlds and where this is the case the app will display "Primary Server" with "Linked Servers".'),n.a.createElement("p",null,"The goal of this app is to show how active each of the four maps in the match up are without having to log in. To measure activity the app displays basic information about the map including the PPT (points per tick) which reflects how much of the map is under a world's control; objectives gained which shows which objectives have recently been captured by whom; and a kills and deaths tracker."),n.a.createElement("p",null,"Kills and deaths are tracked from when you click on a match up so start blank before filling in in 30 second intervals."),n.a.createElement("p",null,"Whether or not that will give an accurate measure of map activity remains to be seen but it should be interesting and I welcome feedback. So far I have noticed that off-peak times often have extended periods of zero kills (I thought it was broken at first)."),n.a.createElement("p",null,"So select a server and see how the match up is going!"),n.a.createElement("br",null),n.a.createElement("br",null))}}]),t}(n.a.Component),q=a(15),V=a(16),G=function(){var e,t;return{getInstance:function(){return e||(e=function(){var e=!1;function a(e){t--<=0&&(r(),T.dispatch({type:"UPDATE_DISPLAY_MESSAGE",payload:"Time out due to inactivity. Please refresh the page or select a different world."})),T.dispatch({type:"FETCH_MATCHUP_DATA",payload:fetch(V.matchupAPIRoot+e).then(function(e){return e.json()})})}function r(){clearInterval(e),e=!1,T.dispatch({type:"SELECT_NEW_SERVER",payload:""})}return{startFetchingAPI:function(r){T.dispatch({type:"UPDATE_DISPLAY_MESSAGE",payload:""}),e&&(clearInterval(e),e=!1,console.warn("Existing API fetching overwritten.")),t=V.fetchTimeout,a(r),0!==V.refreshInterval&&(e=setInterval(a,V.refreshInterval,r)),T.dispatch({type:"SELECT_NEW_SERVER",payload:r})},stopFetchingAPI:function(){r()}}}()),e}}}(),Y=function(e){function t(){return Object(M.a)(this,t),Object(R.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.colour,r=e.ppt,i=e.kills,l=e.deaths,o=e.ratio,s=e.score,c=e.victoryPoints;return n.a.createElement("div",{className:"card card-".concat(a)},n.a.createElement("div",{className:"row-fixed ".concat(a)},n.a.createElement("div",null,t),n.a.createElement("h2",{className:"ppt"},"+ ",r," PPT")),n.a.createElement("div",{className:"row-fixed card-padding"},n.a.createElement("div",null,n.a.createElement("h3",null,"Kills"),n.a.createElement("p",null,i)),n.a.createElement("div",null,n.a.createElement("h3",null,"Deaths"),n.a.createElement("p",null,l)),n.a.createElement("div",null,n.a.createElement("h3",null,"Ratio"),n.a.createElement("p",null,o))),n.a.createElement("div",{className:"row-fixed card-padding"},n.a.createElement("div",null,n.a.createElement("h3",null,"Skirmish Score"),n.a.createElement("p",null,s)),n.a.createElement("div",null,n.a.createElement("h3",null,"Victory Points"),n.a.createElement("p",null,c))))}}]),t}(n.a.Component),K=function(e){function t(){return Object(M.a)(this,t),Object(R.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.props,t=e.serverName,a=e.colour,r=e.position,i=e.score,l=e.ppt,o=e.kills,s=e.deaths,c=e.ratio;return n.a.createElement("div",{className:"inner-card inner-card-".concat(a)},n.a.createElement("div",{className:"row-fixed inner-card-".concat(a)},n.a.createElement("h3",{className:"font-left-align"},r," ",t)),n.a.createElement("div",{className:"card-compact row-fixed"},n.a.createElement("div",null,n.a.createElement("p",null,"Score:"),n.a.createElement("p",null,i)),n.a.createElement("div",null,n.a.createElement("p",null,"PPT:"),n.a.createElement("p",null,l)),n.a.createElement("div",null,n.a.createElement("p",null,"K/D/R:"),n.a.createElement("p",null,o," / ",s," / ",c))))}}]),t}(n.a.Component),J=function(e){function t(){return Object(M.a)(this,t),Object(R.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.compileMapServerScores(this.orderByMapScore());return n.a.createElement("section",{className:"data-component-card"},n.a.createElement("div",{className:"row-fixed"},n.a.createElement("h3",{className:"font-left-align"},"Map Overview")),n.a.createElement("div",null,e))}},{key:"compileMapServerScores",value:function(e){var t=this.props,a=t.mapName,r=t.servers,i=t.activityAnalytics,l=t.kills,o=t.deaths,s=[],c=["1st","2nd","3rd"],d=0;for(var u in e){var p=e[u][0];s.push(n.a.createElement(K,{key:"".concat(a,"_").concat(p),serverName:v(r[p]),colour:p,position:c[d++],score:e[u][1],ppt:i.currentPPT[p],kills:"".concat(y(l[p]/1e3,1),"k"),deaths:"".concat(y(o[p]/1e3,1),"k"),ratio:y(l[p]/o[p],2)}))}return s}},{key:"orderByMapScore",value:function(){var e=this.props.mapScores,t=[];for(var a in e)t.push([a,e[a]]);return t.sort(function(e,t){return t[1]-e[1]}),t}}]),t}(n.a.Component),X=a(1),z=a.n(X),Q=function(e){function t(){return Object(M.a)(this,t),Object(R.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.props,t=e.serverName,a=e.won,r=e.objectiveColours,i=e.stonemist,l=n.a.createElement("div",{className:"row-fixed objective-container"},n.a.createElement("p",null,a.castle,"x"),n.a.createElement("span",null,n.a.createElement("div",{className:"icon-castle icon-".concat(r.castle)})));return i||(l=""),n.a.createElement("div",{className:"objectives-grid"},n.a.createElement("h4",null,"".concat(t,": ")),n.a.createElement("div",{className:"row-fixed objective-container"},n.a.createElement("p",null,a.camp,"x"),n.a.createElement("span",null,n.a.createElement("div",{className:"icon-camp icon-".concat(r.camp)}))),n.a.createElement("div",{className:"row-fixed objective-container"},n.a.createElement("p",null,a.tower,"x"),n.a.createElement("span",null,n.a.createElement("div",{className:"icon-tower icon-".concat(r.tower)}))),n.a.createElement("div",{className:"row-fixed objective-container"},n.a.createElement("p",null,a.keep,"x"),n.a.createElement("span",null,n.a.createElement("div",{className:"icon-keep icon-".concat(r.keep)}))),l)}}]),t}(n.a.Component),$=function(e){function t(){return Object(M.a)(this,t),Object(R.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.props.selectTimeFrame,t=this.compileObjectivesDisplays();return this.totalObjectivesWonLost(),n.a.createElement("section",{className:"data-component-card card-padding"},n.a.createElement("div",{className:"row-fixed"},n.a.createElement("h3",{className:"font-left-align"},"Objectives Gained"),n.a.createElement("button",{className:"objectives-btn ".concat(this.checkIsActive(3e5)),onClick:function(){return e(3e5)}},"<5 mins"),n.a.createElement("button",{className:"objectives-btn ".concat(this.checkIsActive(18e5)),onClick:function(){return e(18e5)}},"<30 mins"),n.a.createElement("button",{className:"objectives-btn ".concat(this.checkIsActive(36e5)),onClick:function(){return e(36e5)}},"<60 mins")),n.a.createElement("div",null,t))}},{key:"compileObjectivesDisplays",value:function(){var e,t=this.props,a=t.servers,r=t.mapName,i=[],l=Object.getOwnPropertyNames(a),o=this.totalObjectivesWonLost(),s=!1;for("Eternal Battlegrounds"===r&&(s=!0),e=0;e<l.length;e++){var c=l[e],d={camp:"",tower:"",keep:"",castle:""};for(var u in o[c])o[c][u]>0?d[u]=c:d[u]="grey";i.push(n.a.createElement(Q,{key:"".concat(this.props.mapName,"_").concat(c),serverName:v(a[c]),won:o[c],objectiveColours:d,stonemist:s}))}return i}},{key:"totalObjectivesWonLost",value:function(){var e=this.props,t=e.objectives,a=e.timeFrame,r={red:{camp:0,tower:0,keep:0,castle:0},blue:{camp:0,tower:0,keep:0,castle:0},green:{camp:0,tower:0,keep:0,castle:0}},n=new Date;for(var i in t){var l=t[i];if(n-new Date(l.last_flipped)<a){var o=l.owner,s=l.type;try{r[o.toLowerCase()][s.toLowerCase()]++}catch(c){console.log("Do not recognise objective of:\n".concat(o,"\n").concat(s))}}}return r}},{key:"checkIsActive",value:function(e){return e===this.props.timeFrame?"objectives-btn-active":""}}]),t}(n.a.Component);$.proptypes={mapName:z.a.string.isRequired,servers:z.a.object.isRequired,objectives:z.a.object.isRequired,timeFrame:z.a.number.isRequired,selectTimeFrame:z.a.func.isRequired};var Z=$,ee=a(29);function te(e){var t=e.kills,a=e.killsWidth,r=e.killsHeight,i=e.killsXPos,l=e.killsYPos,o=e.deaths,s=e.deathsWidth,c=e.deathsHeight,d=e.deathsXPos,u=e.deathsYPos;return n.a.createElement("g",null,n.a.createElement("rect",{width:a,height:r,x:i,y:l},n.a.createElement("title",null,"Kills: ",t)),n.a.createElement("rect",{width:s,height:c,x:d,y:u},n.a.createElement("title",null,"Deaths: ",o)))}function ae(e){var t=e.xPos,a=e.time;return n.a.createElement("g",{className:"graph-axis-tags"},n.a.createElement("rect",{width:"1px",height:"6%",x:"".concat(t,"%"),y:"75%"}),n.a.createElement("text",{x:"".concat(t-4,"%"),y:"100%"},a))}function re(e){var t=Object(r.useState)(10),a=Object(ee.a)(t,2),i=a[0],l=a[1],o=function(e,t,a){var r=[],i=[],l=10,o=e.length-5;o<1&&(o=1);for(var s=o;s<e.length;s++)r.push([e[s][0]-e[s-1][0],e[s][1]-e[s-1][1]]);for(var c=0;c<r.length;c++)r[c][0]>l&&(l=r[c][0]),r[c][1]>l&&(l=r[c][1]);t!==l&&a(l);for(var d=0;d<r.length;d++){var u=r[d][0]/l*80,p=r[d][1]/l*80;0===u&&(u=1),0===p&&(p=1),i.push(n.a.createElement(te,{key:"GraphBars_".concat(d),kills:r[d][0],killsWidth:"6%",killsHeight:"".concat(u,"%"),killsXPos:"".concat(12+18*d,"%"),killsYPos:"".concat(75-u,"%"),deaths:r[d][1],deathsWidth:"6%",deathsHeight:"".concat(p,"%"),deathsXPos:"".concat(19+18*d,"%"),deathsYPos:"".concat(75-p,"%")}))}return i}(e.data,i,l),s=function(e,t,a){for(var r=[],i=[],l=5-e;l<6;l++)i.push(a[l]);for(var o=i.length;o<6;o++)i.push("");for(var s=0;s<6;s++)r.push(n.a.createElement(ae,{key:"axis_stamp_"+s,xPos:t[s],time:i[s]}));return r}(o.length,[10,27,45,63,82,99],["-2m30","-2m","-1m30","-1m","-30s","0s"]);return n.a.createElement("svg",{className:"killstracker-graph"},n.a.createElement("g",{className:"graph-axis-tags"},n.a.createElement("rect",{width:"8px",height:"1px",x:"18px",y:"75%"}),n.a.createElement("text",{x:"6px",y:"80%"},"0"),n.a.createElement("rect",{width:"8px",height:"1px",x:"18px",y:"1px"}),n.a.createElement("text",{x:"0%",y:"14%"},i)),o,n.a.createElement("g",null,s))}function ne(e){var t=e.serverName,a=e.kills;return n.a.createElement("div",{className:"killstracker-grid"},n.a.createElement("h4",null,"".concat(t,": ")),n.a.createElement(re,{className:"row-fixed killstracker-container",data:a}))}function ie(e){var t=function(e,t){var a,r=[],i=Object.getOwnPropertyNames(e);for(a=0;a<i.length;a++){var l=i[a];r.push(n.a.createElement(ne,{key:"KillsTrackerDisplay_"+l,serverName:v(e[l]),kills:t[l]}))}return r}(e.servers,e.kills);return n.a.createElement("section",{className:"data-component-card card-padding"},n.a.createElement("div",{className:"row-fixed"},n.a.createElement("h3",{className:"font-left-align"},"Kills & Deaths Tracker")),n.a.createElement("div",null,n.a.createElement("p",{className:"font-left-align"},"Watching for kills in 30 second intervals. Hover over bars for exact numbers.")),n.a.createElement("div",null,t))}te.proptypes={kills:z.a.number.isRequired,killsWidth:z.a.string.isRequired,killsHeight:z.a.string.isRequired,killsXPos:z.a.string.isRequired,killsYPos:z.a.string.isRequired,deaths:z.a.number.isRequired,deathsWidth:z.a.string.isRequired,deathsHeight:z.a.string.isRequired,deathsXPos:z.a.string.isRequired,deathsYPos:z.a.string.isRequired},ae.proptypes={xPos:z.a.number.isRequired,time:z.a.string},re.proptypes={data:z.a.array.isRequired,showToolTip:z.a.func.isRequired},ne.proptypes={serverName:z.a.string.isRequired,kills:z.a.array.isRequired},ie.proptypes={kills:z.a.object.isRequired};var le=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(R.a)(this,Object(C.a)(t).call(this,e))).state={mapArrayPosition:b(a.props.colour,a.props.fullAPI.maps)},a}return Object(x.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.props,t=e.mapName,a=e.colour,r=e.fullAPI,i=e.activityAnalytics,l=e.timeFrame,o=e.selectTimeFrame,s=this.state.mapArrayPosition;return n.a.createElement("div",{className:"card card-".concat(a)},n.a.createElement("div",{className:"row-fixed ".concat(a)},n.a.createElement("h2",null,t)),n.a.createElement(J,{mapName:t,servers:r.worlds,mapScores:r.skirmishes[r.skirmishes.length-1].map_scores[s].scores,activityAnalytics:i,kills:r.maps[s].kills,deaths:r.maps[s].deaths}),n.a.createElement(Z,{mapName:t,servers:r.worlds,objectives:r.maps[s].objectives,timeFrame:l,selectTimeFrame:o}),n.a.createElement(ie,{servers:r.worlds,kills:i.kd}))}},{key:"checkMapArrayPosition",value:function(){var e=b(this.props.colour,this.props.fullAPI.maps);this.state.mapArrayPosition!==e&&this.setState(e)}}]),t}(n.a.Component),oe=Object(o.b)(function(e){return{fullAPI:e.fullAPIState}})(le),se=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(R.a)(this,Object(C.a)(t).call(this,e))).state={currentServer:"",timeFrame:36e5},a.selectTimeFrame=a.selectTimeFrame.bind(Object(q.a)(Object(q.a)(a))),a}return Object(x.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=f(this.props.match.params.serverName);G.getInstance().startFetchingAPI(e),this.setState({currentServer:e})}},{key:"componentDidUpdate",value:function(){var e=f(this.props.match.params.serverName);if(e!==this.state.currentServer){this.setState({currentServer:e});var t=G.getInstance();t.stopFetchingAPI(),t.startFetchingAPI(e)}}},{key:"componentWillUnmount",value:function(){G.getInstance().stopFetchingAPI()}},{key:"render",value:function(){var e=this.props.displayState;if(e.fetchFailed)return n.a.createElement("p",null,"Unable to find data for this match up. Please try selecting another server or try again later.");if(!e.firstFetchSuccess)return n.a.createElement("p",null,"Loading... If this takes more than ten seconds, please check the URL and refresh.");var t=this.compileServerOverviews(),a=this.compileMapDetails();return n.a.createElement("main",null,n.a.createElement("div",{className:"row-responsive-3"},t),n.a.createElement("div",{className:"bar"}),n.a.createElement("div",{className:"row-responsive-4"},a))}},{key:"compileServerOverviews",value:function(){var e,t=this.props,a=t.fullAPI,r=t.serverOverview,i=t.activityAnalytics,l=Object.getOwnPropertyNames(a.worlds),o=[];for(e=0;e<l.length;e++){var s,c=l[e],d=r[c];d.ppt=0;var u=Object.getOwnPropertyNames(i);for(s=0;s<u.length;s++)d.ppt+=i[u[s]].currentPPT[c];o.push(n.a.createElement(Y,{key:c,name:d.name,colour:c,ppt:d.ppt,kills:E(d.kills),deaths:E(d.deaths),ratio:E(d.ratio),score:E(d.skirmishScore),victoryPoints:d.victoryPoints}))}return o}},{key:"compileMapDetails",value:function(){var e=this.props,t=e.fullAPI,a=e.activityAnalytics,r=this.state.timeFrame,i=[];i.push(n.a.createElement(oe,{key:"0",mapName:"Eternal Battlegrounds",colour:"grey",activityAnalytics:a.eternalBattlegrounds,timeFrame:r,selectTimeFrame:this.selectTimeFrame}));var l,o=Object.getOwnPropertyNames(t.worlds);for(l=0;l<o.length;l++){var s=o[l];i.push(n.a.createElement(oe,{key:t.worlds[s],mapName:"".concat(v(t.worlds[s])," Borderland"),colour:s,activityAnalytics:a["".concat(s,"Borderland")],timeFrame:r,selectTimeFrame:this.selectTimeFrame}))}return i}},{key:"selectTimeFrame",value:function(e){this.setState({timeFrame:e})}}]),t}(n.a.Component),ce=Object(o.b)(function(e){return{displayState:e.displayState,fullAPI:e.fullAPIState,serverOverview:e.serverOverviewState,activityAnalytics:e.activityAnalyticsState}})(se),de=n.a.createElement(A.a,{basename:"/react-wvw-data/"},n.a.createElement(r.Fragment,null,n.a.createElement(W,null),n.a.createElement(F.a,null,n.a.createElement(B.a,{path:"/",component:U,exact:!0}),">",n.a.createElement(B.a,{path:"/:serverName",component:ce}),n.a.createElement(B.a,{component:U}))));a(41);l.a.render(n.a.createElement(o.a,{store:T},de),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-wvw-data",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/react-wvw-data","/service-worker.js");s?(function(e,t){fetch(e).then(function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):c(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):c(t,e)})}}()}},[[31,2,1]]]);
//# sourceMappingURL=main.62e00c5d.chunk.js.map